!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.silhouette=r():t.silhouette=r()}(this,function(){return(t=>{function r(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var e={};return r.m=t,r.c=e,r.d=((t,e,s)=>{r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})}),r.n=(t=>{var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e}),r.o=((t,r)=>Object.prototype.hasOwnProperty.call(t,r)),r.p="",r(r.s=8)})([(t,r,e)=>{"use strict";(t=>{var e="undefined"!=typeof window&&window,s="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=void 0!==t&&t,i=e||o||s;r.root=i,(()=>{if(!i)throw new Error("RxJS could not find any global context (window, self, global)")})()}).call(r,e(12))},function(t,r,e){"use strict";function s(t){return t.reduce((t,r)=>t.concat(r instanceof b.UnsubscriptionError?r.errors:r),[])}var o=e(14),i=e(15),n=e(4),c=e(16),u=e(5),b=e(17),h=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,r=!1;if(!this.closed){var e=this,h=e._parent,p=e._parents,a=e._unsubscribe,l=e._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,y=p?p.length:0;h;)h.remove(this),h=++f<y&&p[f]||null;if(n.isFunction(a)&&(_=c.tryCatch(a).call(this))===u.errorObject&&(r=!0,t=t||(u.errorObject.e instanceof b.UnsubscriptionError?s(u.errorObject.e.errors):[u.errorObject.e])),o.isArray(l))for(f=-1,y=l.length;++f<y;){var d=l[f];if(i.isObject(d)){var _=c.tryCatch(d.unsubscribe).call(d);if(_===u.errorObject){r=!0,t=t||[];var v=u.errorObject.e;v instanceof b.UnsubscriptionError?t=t.concat(s(v.errors)):t.push(v)}}}if(r)throw new b.UnsubscriptionError(t)}},t.prototype.add=function(r){if(!r||r===t.EMPTY)return t.EMPTY;if(r===this)return this;var e=r;switch(typeof r){case"function":e=new t(r);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var s=e;(e=new t)._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.prototype._addParent=function(t){var r=this,e=r._parent,s=r._parents;e&&e!==t?s?-1===s.indexOf(t)&&s.push(t):this._parents=[t]:this._parent=t},t.EMPTY=(t=>(t.closed=!0,t))(new t),t}();r.Subscription=h},(t,r,e)=>{"use strict";var s=e(0).root.Symbol;r.rxSubscriber="function"==typeof s&&"function"==typeof s.for?s.for("rxSubscriber"):"@@rxSubscriber",r.$$rxSubscriber=r.rxSubscriber},function(t,r,e){"use strict";var s=function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},o=e(4),i=e(1),n=e(6),c=e(2),u=function(t){function r(e,s,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=n.empty;break;case 1:if(!e){this.destination=n.empty;break}if("object"==typeof e){e instanceof r?(this.destination=e,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new b(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new b(this,e,s,o)}}return s(r,t),r.prototype[c.rxSubscriber]=function(){return this},r.create=((t,e,s)=>{var o=new r(t,e,s);return o.syncErrorThrowable=!1,o}),r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this,r=t._parent,e=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=r,this._parents=e,this},r}(i.Subscription);r.Subscriber=u;var b=function(t){function r(r,e,s,i){t.call(this),this._parentSubscriber=r;var c,u=this;o.isFunction(e)?c=e:e&&(c=e.next,s=e.error,i=e.complete,e!==n.empty&&(u=Object.create(e),o.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=c,this._error=s,this._complete=i}return s(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber;if(this._error)r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!r.syncErrorThrowable)throw this.unsubscribe(),t;r.syncErrorValue=t,r.syncErrorThrown=!0,this.unsubscribe()}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=()=>t._complete.call(t._context);r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){throw this.unsubscribe(),t}},r.prototype.__tryOrSetError=function(t,r,e){try{r.call(this._context,e)}catch(r){return t.syncErrorValue=r,t.syncErrorThrown=!0,!0}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(u)},(t,r,e)=>{"use strict";r.isFunction=function(t){return"function"==typeof t}},(t,r,e)=>{"use strict";r.errorObject={e:{}}},(t,r,e)=>{"use strict";r.empty={closed:!0,next(t){},error(t){throw t},complete(){}}},function(t,r,e){"use strict";var s=function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},o=function(t){function r(){var r=t.call(this,"object unsubscribed");this.name=r.name="ObjectUnsubscribedError",this.stack=r.stack,this.message=r.message}return s(r,t),r}(Error);r.ObjectUnsubscribedError=o},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e(9);const o=Symbol("stream");r.default=(t=>({Silhouette(t,r){let e=r.symbols,i=t.prototype,n=i[e.__push__];return i[e.__push__]=function({value:t,done:r}){n({value:t,done:r}),this[o]instanceof s.BehaviorSubject?r?this[o].complete():this[o].next(t):this[o]=t,r&&Object.keys(this).forEach(t=>this[t][e.__push__]({done:r}))},i.asObservable=function(){return this[o]instanceof s.BehaviorSubject||(this[o]=new s.BehaviorSubject(this[o])),this[o].asObservable()},t}}))},function(t,r,e){"use strict";var s=function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},o=e(10),i=e(7),n=function(t){function r(r){t.call(this),this._value=r}return s(r,t),Object.defineProperty(r.prototype,"value",{get(){return this.getValue()},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(r){var e=t.prototype._subscribe.call(this,r);return e&&!e.closed&&r.next(this._value),e},r.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.ObjectUnsubscribedError;return this._value},r.prototype.next=function(r){t.prototype.next.call(this,this._value=r)},r}(o.Subject);r.BehaviorSubject=n},function(t,r,e){"use strict";var s=function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},o=e(11),i=e(3),n=e(1),c=e(7),u=e(19),b=e(2),h=function(t){function r(r){t.call(this,r),this.destination=r}return s(r,t),r}(i.Subscriber);r.SubjectSubscriber=h;var p=function(t){function r(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return s(r,t),r.prototype[b.rxSubscriber]=function(){return new h(this)},r.prototype.lift=function(t){var r=new a(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var r=this.observers,e=r.length,s=r.slice(),o=0;o<e;o++)s[o].next(t)},r.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,s=r.slice(),o=0;o<e;o++)s[o].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),s=0;s<r;s++)e[s].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new c.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),n.Subscription.EMPTY):this.isStopped?(t.complete(),n.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},r.prototype.asObservable=function(){var t=new o.Observable;return t.source=this,t},r.create=((t,r)=>new a(t,r)),r}(o.Observable);r.Subject=p;var a=function(t){function r(r,e){t.call(this),this.destination=r,this.source=e}return s(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):n.Subscription.EMPTY},r}(p);r.AnonymousSubject=a},function(t,r,e){"use strict";var s=e(0),o=e(13),i=e(18),n=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var s=this.operator,i=o.toSubscriber(t,r,e);if(s?s.call(i,this.source):i.add(this.source?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.syncErrorThrown=!0,t.syncErrorValue=r,t.error(r)}},t.prototype.forEach=function(t,r){var e=this;if(r||(s.root.Rx&&s.root.Rx.config&&s.root.Rx.config.Promise?r=s.root.Rx.config.Promise:s.root.Promise&&(r=s.root.Promise)),!r)throw new Error("no Promise impl found");return new r((r,s)=>{var o;o=e.subscribe(r=>{if(o)try{t(r)}catch(t){s(t),o.unsubscribe()}else t(r)},s,r)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.create=(r=>new t(r)),t}();r.Observable=n},function(t,r,e){"use strict";var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(s=window)}t.exports=s},(t,r,e)=>{"use strict";var s=e(3),o=e(2),i=e(6);r.toSubscriber=function(t,r,e){if(t){if(t instanceof s.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||r||e?new s.Subscriber(t,r,e):new s.Subscriber(i.empty)}},(t,r,e)=>{"use strict";r.isArray=Array.isArray||(t=>t&&"number"==typeof t.length)},(t,r,e)=>{"use strict";r.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,r,e){"use strict";function s(){try{return o.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}var o,i=e(5);r.tryCatch=function(t){return o=t,s}},function(t,r,e){"use strict";var s=function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},o=function(t){function r(r){t.call(this),this.errors=r;var e=Error.call(this,r?r.length+" errors occurred during unsubscription:\n  "+r.map((t,r)=>r+1+") "+t.toString()).join("\n  "):"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}return s(r,t),r}(Error);r.UnsubscriptionError=o},(t,r,e)=>{"use strict";function s(t){var r,e=t.Symbol;return"function"==typeof e?e.observable?r=e.observable:(r=e("observable"),e.observable=r):r="@@observable",r}var o=e(0);r.getSymbolObservable=s,r.observable=s(o.root),r.$$observable=r.observable},function(t,r,e){"use strict";var s=function(t,r){function e(){this.constructor=t}for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},o=function(t){function r(r,e){t.call(this),this.subject=r,this.subscriber=e,this.closed=!1}return s(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(e(1).Subscription);r.SubjectSubscription=o}])});